<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Comprehensive knowledge base with advanced search, categorization, and expert documentation - WorkToolsHub"
    />
    <meta
      name="keywords"
      content="knowledge base, documentation, search, technical guides, tutorials"
    />
    <meta name="author" content="DevChollo" />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta
      property="og:url"
      content="https://worktoolshub.info/knowledge-base"
    />
    <meta property="og:title" content="Knowledge Base - WorkToolsHub" />
    <meta
      property="og:description"
      content="Comprehensive knowledge base with advanced search and expert documentation"
    />
    <meta
      property="og:image"
      content="https://worktoolshub.info/assets/og-image.jpg"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta
      property="twitter:url"
      content="https://worktoolshub.info/knowledge-base"
    />
    <meta property="twitter:title" content="Knowledge Base - WorkToolsHub" />
    <meta
      property="twitter:description"
      content="Comprehensive knowledge base with advanced search and expert documentation"
    />
    <meta
      property="twitter:image"
      content="https://worktoolshub.info/assets/og-image.jpg"
    />

    <title>Knowledge Base - WorkToolsHub</title>
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />

    <link rel="preconnect" href="https://worktoolshubv2.onrender.com" />

    <!-- Styling / CSS -->
    <link rel="stylesheet" href="../styles/main.css" />

    <style>
      /* Knowledge Base Specific Variables */
      :root {
        --kb-primary: #6366f1;
        --kb-primary-dark: #4f46e5;
        --kb-secondary: #8b5cf6;
        --kb-accent: #06d6a0;
        --kb-surface: #fafbfc;
        --kb-surface-elevated: #ffffff;
        --kb-text-muted: #6b7280;
        --kb-border-soft: #e5e7eb;
        --kb-gradient: linear-gradient(
          135deg,
          var(--kb-primary) 0%,
          var(--kb-secondary) 100%
        );
      }

      [data-theme="dark"] {
        --kb-primary: #818cf8;
        --kb-primary-dark: #6366f1;
        --kb-secondary: #a78bfa;
        --kb-accent: #34d399;
        --kb-surface: #1f2937;
        --kb-surface-elevated: #374151;
        --kb-text-muted: #9ca3af;
        --kb-border-soft: #4b5563;
      }

      /* Knowledge Base Layout */
      .kb-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 2rem 1rem;
      }

      /* Hero Section */
      .kb-hero {
        background: var(--kb-gradient);
        color: white;
        padding: 4rem 0;
        text-align: center;
        position: relative;
        overflow: hidden;
        margin-bottom: 3rem;
        border-radius: var(--radius-xl);
      }

      .kb-hero::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")
          repeat;
        opacity: 0.7;
      }

      .kb-hero-content {
        position: relative;
        z-index: 2;
      }

      .kb-hero h1 {
        font-size: clamp(2.5rem, 5vw, 4rem);
        font-weight: 800;
        margin-bottom: 1rem;
        letter-spacing: -0.02em;
      }

      .kb-hero-subtitle {
        font-size: clamp(1.1rem, 3vw, 1.5rem);
        opacity: 0.9;
        max-width: 700px;
        margin: 0 auto 2rem;
      }

      /* Advanced Search Section */
      .search-section {
        background: var(--kb-surface-elevated);
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-xl);
        padding: 2rem;
        margin-bottom: 3rem;
        box-shadow: var(--shadow-lg);
      }

      .search-header {
        text-align: center;
        margin-bottom: 2rem;
      }

      .search-header h2 {
        color: var(--kb-primary);
        font-size: 1.5rem;
        margin-bottom: 0.5rem;
      }

      .search-container {
        max-width: 800px;
        margin: 0 auto;
        position: relative;
      }

      .search-input-wrapper {
        position: relative;
        margin-bottom: 1.5rem;
      }

      .search-input {
        width: 100%;
        padding: 1.25rem 3.5rem 1.25rem 1.5rem;
        border: 2px solid var(--kb-border-soft);
        border-radius: var(--radius-xl);
        font-size: 1.1rem;
        background: var(--bg-color);
        color: var(--text-primary);
        transition: all 0.3s ease;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--kb-primary);
        box-shadow: 0 0 0 4px rgba(99, 102, 241, 0.1);
        transform: translateY(-2px);
      }

      .search-icon {
        position: absolute;
        right: 1.5rem;
        top: 50%;
        transform: translateY(-50%);
        color: var(--kb-text-muted);
        font-size: 1.25rem;
      }

      .search-filters {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 1rem;
        margin-bottom: 1.5rem;
      }

      .filter-select {
        padding: 0.75rem 1rem;
        border: 2px solid var(--kb-border-soft);
        border-radius: var(--radius-lg);
        background: var(--bg-color);
        color: var(--text-primary);
        font-size: 0.9rem;
        transition: all 0.2s ease;
      }

      .filter-select:focus {
        outline: none;
        border-color: var(--kb-primary);
      }

      .search-tags {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 1rem;
      }

      .search-tag {
        background: var(--kb-primary);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.75rem;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .search-tag:hover {
        background: var(--kb-primary-dark);
        transform: translateY(-1px);
      }

      /* Results Section */
      .results-section {
        display: grid;
        grid-template-columns: 300px 1fr;
        gap: 2rem;
        margin-bottom: 3rem;
      }

      /* Sidebar */
      .kb-sidebar {
        background: var(--kb-surface-elevated);
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-xl);
        padding: 1.5rem;
        height: fit-content;
        position: sticky;
        top: 2rem;
      }

      .sidebar-section {
        margin-bottom: 2rem;
      }

      .sidebar-section:last-child {
        margin-bottom: 0;
      }

      .sidebar-title {
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 1rem;
        padding-bottom: 0.5rem;
        border-bottom: 1px solid var(--kb-border-soft);
      }

      .category-list {
        list-style: none;
      }

      .category-item {
        margin-bottom: 0.5rem;
      }

      .category-link {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.5rem 0.75rem;
        color: var(--kb-text-muted);
        text-decoration: none;
        border-radius: var(--radius-md);
        transition: all 0.2s ease;
        font-size: 0.9rem;
      }

      .category-link:hover,
      .category-link.active {
        background: var(--kb-primary);
        color: white;
        transform: translateX(4px);
      }

      .category-count {
        background: var(--kb-border-soft);
        color: var(--kb-text-muted);
        padding: 0.125rem 0.5rem;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 500;
      }

      .category-link:hover .category-count,
      .category-link.active .category-count {
        background: rgba(255, 255, 255, 0.2);
        color: white;
      }

      /* Main Content */
      .kb-main {
        background: var(--kb-surface-elevated);
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-xl);
        padding: 2rem;
      }

      .results-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--kb-border-soft);
      }

      .results-count {
        color: var(--kb-text-muted);
        font-size: 0.9rem;
      }

      .sort-select {
        padding: 0.5rem 1rem;
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-md);
        background: var(--bg-color);
        color: var(--text-primary);
        font-size: 0.9rem;
      }

      /* Article Grid */
      .articles-grid {
        display: grid;
        gap: 1.5rem;
      }

      .article-card {
        background: var(--bg-color);
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .article-card:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-lg);
        border-color: var(--kb-primary);
      }

      .article-header {
        display: flex;
        justify-content: between;
        align-items: flex-start;
        margin-bottom: 1rem;
      }

      .article-category {
        background: var(--kb-gradient);
        color: white;
        padding: 0.25rem 0.75rem;
        border-radius: 50px;
        font-size: 0.75rem;
        font-weight: 600;
        margin-bottom: 0.5rem;
        display: inline-block;
      }

      .article-title {
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.75rem;
        line-height: 1.3;
      }

      .article-excerpt {
        color: var(--kb-text-muted);
        font-size: 0.9rem;
        line-height: 1.6;
        margin-bottom: 1rem;
      }

      .article-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 0.8rem;
        color: var(--kb-text-muted);
      }

      .article-actions {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        margin-top: 1rem;
        padding-top: 1rem;
        border-top: 1px solid var(--kb-border-soft);
      }

      .action-btn {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        padding: 0.5rem 0.75rem;
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-md);
        background: var(--bg-color);
        color: var(--kb-text-muted);
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.8rem;
        text-decoration: none;
      }

      .action-btn:hover {
        border-color: var(--kb-primary);
        color: var(--kb-primary);
        transform: translateY(-1px);
      }

      .action-btn.upvoted {
        background: var(--kb-primary);
        color: white;
        border-color: var(--kb-primary);
      }

      .action-btn.suggest-edit {
        border-color: var(--kb-accent);
        color: var(--kb-accent);
      }

      .action-btn.suggest-edit:hover {
        background: var(--kb-accent);
        color: white;
      }

      /* AI Assistant Panel */
      .ai-assistant {
        position: fixed;
        bottom: 2rem;
        right: 2rem;
        z-index: 1000;
      }

      .ai-toggle {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        background: var(--kb-gradient);
        border: none;
        color: white;
        font-size: 1.5rem;
        cursor: pointer;
        box-shadow: var(--shadow-lg);
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .ai-toggle:hover {
        transform: scale(1.1);
      }

      .ai-panel {
        position: absolute;
        bottom: 70px;
        right: 0;
        width: 400px;
        background: var(--bg-color);
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-lg);
        display: none;
        animation: slideUp 0.3s ease;
      }

      .ai-panel.active {
        display: block;
      }

      .ai-header {
        padding: 1.5rem;
        border-bottom: 1px solid var(--kb-border-soft);
        background: var(--kb-gradient);
        color: white;
        border-radius: var(--radius-xl) var(--radius-xl) 0 0;
      }

      .ai-header h3 {
        margin: 0;
        font-size: 1.1rem;
      }

      .ai-header p {
        margin: 0.25rem 0 0 0;
        opacity: 0.9;
        font-size: 0.85rem;
      }

      .ai-content {
        padding: 1.5rem;
      }

      .ai-input {
        width: 100%;
        padding: 0.75rem;
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-md);
        margin-bottom: 1rem;
        background: var(--bg-color);
        color: var(--text-primary);
        resize: vertical;
        min-height: 80px;
      }

      .ai-input:focus {
        outline: none;
        border-color: var(--kb-primary);
      }

      .ai-submit {
        background: var(--kb-primary);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
      }

      .ai-submit:hover:not(:disabled) {
        background: var(--kb-primary-dark);
      }

      .ai-submit:disabled {
        opacity: 0.7;
        cursor: not-allowed;
      }

      .ai-response {
        background: var(--kb-surface);
        border-radius: var(--radius-md);
        padding: 1rem;
        margin-top: 1rem;
        display: none;
        border-left: 4px solid var(--kb-primary);
      }

      .ai-response.active {
        display: block;
      }

      .ai-response-header {
        display: flex;
        justify-content: between;
        align-items: center;
        margin-bottom: 0.5rem;
      }

      .ai-response-title {
        font-weight: 600;
        color: var(--text-primary);
        font-size: 0.9rem;
      }

      .ai-response-content {
        color: var(--kb-text-muted);
        font-size: 0.85rem;
        line-height: 1.5;
        white-space: pre-line;
      }

      /* Edit Suggestion Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
      }

      .modal-overlay.active {
        display: flex;
      }

      .edit-modal {
        background: var(--bg-color);
        border-radius: var(--radius-xl);
        padding: 2rem;
        max-width: 600px;
        width: 90%;
        max-height: 80vh;
        overflow-y: auto;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
        padding-bottom: 1rem;
        border-bottom: 1px solid var(--kb-border-soft);
      }

      .modal-header h3 {
        color: var(--text-primary);
        margin: 0;
      }

      .modal-close {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--kb-text-muted);
        cursor: pointer;
      }

      .edit-form {
        display: grid;
        gap: 1rem;
      }

      .form-group {
        display: flex;
        flex-direction: column;
      }

      .form-label {
        font-weight: 600;
        color: var(--text-primary);
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
      }

      .form-input,
      .form-textarea {
        padding: 0.75rem;
        border: 1px solid var(--kb-border-soft);
        border-radius: var(--radius-md);
        background: var(--bg-color);
        color: var(--text-primary);
      }

      .form-textarea {
        min-height: 120px;
        resize: vertical;
      }

      .form-input:focus,
      .form-textarea:focus {
        outline: none;
        border-color: var(--kb-primary);
      }

      .form-actions {
        display: flex;
        gap: 1rem;
        justify-content: flex-end;
        margin-top: 1rem;
      }

      .btn-secondary {
        background: var(--kb-surface);
        color: var(--text-primary);
        border: 1px solid var(--kb-border-soft);
        padding: 0.75rem 1.5rem;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-secondary:hover {
        background: var(--kb-border-soft);
      }

      .btn-primary {
        background: var(--kb-primary);
        color: white;
        border: none;
        padding: 0.75rem 1.5rem;
        border-radius: var(--radius-md);
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .btn-primary:hover:not(:disabled) {
        background: var(--kb-primary-dark);
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .article-tags {
        display: flex;
        gap: 0.5rem;
      }

      .article-tag {
        background: var(--kb-surface);
        color: var(--kb-text-muted);
        padding: 0.125rem 0.5rem;
        border-radius: 50px;
        font-size: 0.7rem;
      }

      /* Loading States */
      .loading-skeleton {
        background: linear-gradient(
          90deg,
          var(--kb-surface) 25%,
          var(--kb-border-soft) 50%,
          var(--kb-surface) 75%
        );
        background-size: 200% 100%;
        animation: loading 1.5s infinite;
      }

      .skeleton-card {
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        margin-bottom: 1.5rem;
      }

      .skeleton-line {
        height: 1rem;
        border-radius: var(--radius-sm);
        margin-bottom: 0.75rem;
      }

      .skeleton-line.short {
        width: 60%;
      }

      .skeleton-line.medium {
        width: 80%;
      }

      @keyframes loading {
        0% {
          background-position: -200% 0;
        }
        100% {
          background-position: 200% 0;
        }
      }

      /* No Results */
      .no-results {
        text-align: center;
        padding: 3rem 1rem;
        color: var(--kb-text-muted);
      }

      .no-results-icon {
        font-size: 3rem;
        margin-bottom: 1rem;
        opacity: 0.5;
      }

      .no-results h3 {
        font-size: 1.25rem;
        margin-bottom: 0.5rem;
        color: var(--text-primary);
      }

      /* Responsive Design */
      @media (max-width: 1024px) {
        .results-section {
          grid-template-columns: 1fr;
        }

        .kb-sidebar {
          position: static;
          order: 2;
        }
      }

      @media (max-width: 768px) {
        .kb-container {
          padding: 1rem;
        }

        .kb-hero {
          padding: 3rem 1rem;
        }

        .search-section {
          padding: 1.5rem;
        }

        .search-filters {
          grid-template-columns: 1fr;
        }

        .results-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 1rem;
        }
      }

      /* Utility Classes */
      .fade-in {
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>

    <!-- Structured Data -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "WorkToolsHub Knowledge Base",
        "description": "Comprehensive knowledge base with advanced search and expert documentation",
        "url": "https://worktoolshub.info/knowledge-base",
        "potentialAction": {
          "@type": "SearchAction",
          "target": "https://worktoolshub.info/knowledge-base?q={search_term_string}",
          "query-input": "required name=search_term_string"
        },
        "publisher": {
          "@type": "Organization",
          "name": "WorkToolsHub"
        }
      }
    </script>
  </head>
  <body>
    <div id="header"></div>
    <div id="bread"></div>

    <main>
      <div class="kb-container">
        <!-- Hero Section -->
        <section class="kb-hero">
          <div class="kb-hero-content">
            <h1>Knowledge Base</h1>
            <p class="kb-hero-subtitle">
              Discover comprehensive documentation, tutorials, and expert
              insights. Your definitive resource for technical knowledge and
              best practices.
            </p>
          </div>
        </section>

        <!-- Advanced Search -->
        <section class="search-section">
          <div class="search-header">
            <h2>Find What You Need</h2>
            <p>Advanced search with intelligent filtering and categorization</p>
          </div>

          <div class="search-container">
            <div class="search-input-wrapper">
              <input
                type="text"
                class="search-input"
                id="searchInput"
                placeholder="Search articles, tutorials, guides..."
                autocomplete="off"
              />
              <span class="search-icon">üîç</span>
            </div>

            <div class="search-filters">
              <select class="filter-select" id="categoryFilter">
                <option value="">All Categories</option>
                <option value="technical">Technical Guides</option>
                <option value="tutorials">Tutorials</option>
                <option value="troubleshooting">Troubleshooting</option>
                <option value="best-practices">Best Practices</option>
                <option value="tools">Tools & Resources</option>
              </select>

              <select class="filter-select" id="difficultyFilter">
                <option value="">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
                <option value="expert">Expert</option>
              </select>

              <select class="filter-select" id="dateFilter">
                <option value="">All Time</option>
                <option value="week">Past Week</option>
                <option value="month">Past Month</option>
                <option value="quarter">Past Quarter</option>
                <option value="year">Past Year</option>
              </select>
            </div>

            <div class="search-tags" id="searchTags">
              <span class="search-tag">API Integration</span>
              <span class="search-tag">Database Design</span>
              <span class="search-tag">Performance</span>
              <span class="search-tag">Security</span>
              <span class="search-tag">Deployment</span>
              <span class="search-tag">Testing</span>
            </div>
          </div>
        </section>

        <!-- Results Section -->
        <section class="results-section">
          <!-- Sidebar -->
          <aside class="kb-sidebar">
            <div class="sidebar-section">
              <h3 class="sidebar-title">Categories</h3>
              <ul class="category-list" id="categoryList">
                <li class="category-item">
                  <a href="#" class="category-link active" data-category="">
                    <span>All Articles</span>
                    <span class="category-count">247</span>
                  </a>
                </li>
                <li class="category-item">
                  <a href="#" class="category-link" data-category="technical">
                    <span>Technical Guides</span>
                    <span class="category-count">89</span>
                  </a>
                </li>
                <li class="category-item">
                  <a href="#" class="category-link" data-category="tutorials">
                    <span>Tutorials</span>
                    <span class="category-count">67</span>
                  </a>
                </li>
                <li class="category-item">
                  <a
                    href="#"
                    class="category-link"
                    data-category="troubleshooting"
                  >
                    <span>Troubleshooting</span>
                    <span class="category-count">45</span>
                  </a>
                </li>
                <li class="category-item">
                  <a
                    href="#"
                    class="category-link"
                    data-category="best-practices"
                  >
                    <span>Best Practices</span>
                    <span class="category-count">32</span>
                  </a>
                </li>
                <li class="category-item">
                  <a href="#" class="category-link" data-category="tools">
                    <span>Tools & Resources</span>
                    <span class="category-count">14</span>
                  </a>
                </li>
              </ul>
            </div>

            <div class="sidebar-section">
              <h3 class="sidebar-title">Popular Tags</h3>
              <div class="search-tags">
                <span class="search-tag">JavaScript</span>
                <span class="search-tag">React</span>
                <span class="search-tag">Node.js</span>
                <span class="search-tag">MongoDB</span>
                <span class="search-tag">AWS</span>
                <span class="search-tag">Docker</span>
              </div>
            </div>
          </aside>

          <!-- Main Content -->
          <main class="kb-main">
            <div class="results-header">
              <div class="results-count" id="resultsCount">
                Showing 247 articles
              </div>
              <select class="sort-select" id="sortSelect">
                <option value="relevance">Most Relevant</option>
                <option value="date">Most Recent</option>
                <option value="popular">Most Popular</option>
                <option value="title">Alphabetical</option>
              </select>
            </div>

            <div class="articles-grid" id="articlesGrid">
              <!-- Articles will be populated here -->
            </div>

            <!-- No Results State -->
            <div class="no-results" id="noResults" style="display: none">
              <div class="no-results-icon">üìù</div>
              <h3>No articles found</h3>
              <p>
                Try adjusting your search criteria or ask our AI assistant for
                help.
              </p>
              <button
                class="btn-primary"
                id="noResultsAiBtn"
              >
                Ask AI Assistant
              </button>
            </div>
          </main>
        </section>
      </div>

      <!-- AI Assistant -->
      <div class="ai-assistant">
        <button class="ai-toggle" id="aiToggle" title="AI Assistant">ü§ñ</button>
        <div class="ai-panel" id="aiPanel">
          <div class="ai-header">
            <h3>AI Knowledge Assistant</h3>
            <p>Can't find what you're looking for? Ask me!</p>
          </div>
          <div class="ai-content">
            <textarea
              class="ai-input"
              id="aiInput"
              placeholder="Describe what you're looking for or ask a technical question..."
            ></textarea>
            <button class="ai-submit" id="aiSubmit">
              <span class="ai-submit-text">Get AI Answer</span>
              <span class="ai-submit-loading" style="display: none">
                <div class="spinner" style="width: 16px; height: 16px"></div>
                Thinking...
              </span>
            </button>
            <div class="ai-response" id="aiResponse">
              <div class="ai-response-header">
                <span class="ai-response-title">AI Assistant Response</span>
              </div>
              <div class="ai-response-content" id="aiResponseContent"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Edit Suggestion Modal -->
      <div class="modal-overlay" id="editModal">
        <div class="edit-modal">
          <div class="modal-header">
            <h3>Suggest Edit</h3>
            <button class="modal-close" id="modalClose">&times;</button>
          </div>
          <form class="edit-form" id="editForm">
            <input type="hidden" id="editArticleId" />
            <div class="form-group">
              <label class="form-label">Article Title</label>
              <input type="text" class="form-input" id="editTitle" readonly />
            </div>
            <div class="form-group">
              <label class="form-label">Your Name</label>
              <input
                type="text"
                class="form-input"
                id="editorName"
                placeholder="Enter your name"
                required
              />
            </div>
            <div class="form-group">
              <label class="form-label">Edit Type</label>
              <select class="form-input" id="editType" required>
                <option value="">Select edit type</option>
                <option value="correction">Correction</option>
                <option value="addition">Addition</option>
                <option value="update">Update</option>
                <option value="clarification">Clarification</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label">Suggested Changes</label>
              <textarea
                class="form-textarea"
                id="editSuggestion"
                placeholder="Describe your suggested changes in detail..."
                required
              ></textarea>
            </div>
            <div class="form-actions">
              <button type="button" class="btn-secondary" id="cancelEdit">
                Cancel
              </button>
              <button type="submit" class="btn-primary" id="submitEdit">
                Submit Suggestion
              </button>
            </div>
          </form>
        </div>
      </div>
    </main>

    <div id="footer"></div>

    <script src="../scripts/layout.js"></script>
    <script type="module" src="../scripts/main.js" defer></script>

    <script>
      class KnowledgeBase {
          constructor() {
              this.articles = [];
              this.filteredArticles = [];
              this.currentSearch = '';
              this.currentFilters = {
                  category: '',
                  difficulty: '',
                  date: '',
                  tags: []
              };

              this.init();
          }

          async init() {
              this.bindEvents();
              await this.loadArticles();
              this.renderArticles();
          }

          bindEvents() {
              // Search input
              document.getElementById('searchInput').addEventListener('input',
                  this.debounce((e) => this.handleSearch(e.target.value), 300)
              );

              // Filter selects
              document.getElementById('categoryFilter').addEventListener('change',
                  (e) => this.handleFilterChange('category', e.target.value)
              );
              document.getElementById('difficultyFilter').addEventListener('change',
                  (e) => this.handleFilterChange('difficulty', e.target.value)
              );
              document.getElementById('dateFilter').addEventListener('change',
                  (e) => this.handleFilterChange('date', e.target.value)
              );

              // Sort select
              document.getElementById('sortSelect').addEventListener('change',
                  (e) => this.handleSort(e.target.value)
              );

              // Sidebar categories
              document.querySelectorAll('.category-link').forEach(link => {
                  link.addEventListener('click', (e) => {
                      e.preventDefault();
                      this.handleCategoryClick(e.target.closest('.category-link'));
                  });
              });

              // Search tags
              document.querySelectorAll('.search-tag').forEach(tag => {
                  tag.addEventListener('click', (e) => {
                      this.handleTagClick(e.target.textContent);
                  });
              });
          }

          async loadArticles() {
              this.showLoading();

              try {
                  const response = await fetch('https://worktoolshubv2.onrender.com/api/knowledge-base/articles');

                  if (!response.ok) {
                      // Fallback to demo data if API is not ready
                      this.articles = this.getDemoArticles();
                  } else {
                      this.articles = await response.json();
                  }

                  this.filteredArticles = [...this.articles];
              } catch (error) {
                  console.error('Failed to load articles:', error);
                  this.articles = this.getDemoArticles();
                  this.filteredArticles = [...this.articles];
              }
          }

          getDemoArticles() {
              return [
                  {
                      id: 1,
                      title: "Advanced React Performance Optimization Techniques",
                      excerpt: "Learn how to optimize React applications for better performance using React.memo, useMemo, useCallback, and advanced patterns.",
                      content: "Full article content here...",
                      category: "technical",
                      difficulty: "advanced",
                      tags: ["React", "Performance", "JavaScript", "Optimization"],
                      author: "John Doe",
                      date: "2024-01-15",
                      views: 1250,
                      readTime: "8 min read",
                      upvotes: 47,
                      helpfulCount: 89
                  },
                  {
                      id: 2,
                      title: "Getting Started with MongoDB Atlas",
                      excerpt: "A comprehensive tutorial on setting up and using MongoDB Atlas for your next project.",
                      content: "Full article content here...",
                      category: "tutorials",
                      difficulty: "beginner",
                      tags: ["MongoDB", "Database", "Atlas", "NoSQL"],
                      author: "Jane Smith",
                      date: "2024-01-12",
                      views: 890,
                      readTime: "12 min read",
                      upvotes: 32,
                      helpfulCount: 67
                  },
                  {
                      id: 3,
                      title: "Troubleshooting Common Docker Issues",
                      excerpt: "Solutions to the most common Docker problems developers encounter in production environments.",
                      content: "Full article content here...",
                      category: "troubleshooting",
                      difficulty: "intermediate",
                      tags: ["Docker", "DevOps", "Containers", "Deployment"],
                      author: "Mike Johnson",
                      date: "2024-01-10",
                      views: 2100,
                      readTime: "15 min read",
                      upvotes: 78,
                      helpfulCount: 134
                  },
                  {
                      id: 4,
                      title: "API Design Best Practices for 2024",
                      excerpt: "Modern approaches to designing scalable, maintainable APIs with proper versioning and documentation.",
                      content: "Full article content here...",
                      category: "best-practices",
                      difficulty: "intermediate",
                      tags: ["API", "REST", "GraphQL", "Design"],
                      author: "Sarah Wilson",
                      date: "2024-01-08",
                      views: 1750,
                      readTime: "10 min read",
                      upvotes: 56,
                      helpfulCount: 98
                  },
                  {
                      id: 5,
                      title: "Essential VS Code Extensions for Developers",
                      excerpt: "Boost your productivity with these carefully curated VS Code extensions for modern development.",
                      content: "Full article content here...",
                      category: "tools",
                      difficulty: "beginner",
                      tags: ["VS Code", "Extensions", "Productivity", "Tools"],
                      author: "Alex Chen",
                      date: "2024-01-05",
                      views: 3200,
                      readTime: "6 min read",
                      upvotes: 91,
                      helpfulCount: 156
                  }
              ];
          }

          handleSearch(query) {
              this.currentSearch = query.toLowerCase();
              this.applyFilters();
          }

          handleFilterChange(filterType, value) {
              this.currentFilters[filterType] = value;
              this.applyFilters();
          }

          handleSort(sortType) {
              switch (sortType) {
                  case 'date':
                      this.filteredArticles.sort((a, b) => new Date(b.date) - new Date(a.date));
                      break;
                  case 'popular':
                      this.filteredArticles.sort((a, b) => b.views - a.views);
                      break;
                  case 'title':
                      this.filteredArticles.sort((a, b) => a.title.localeCompare(b.title));
                      break;
                  default: // relevance
                      this.filteredArticles.sort((a, b) => b.views - a.views);
              }
              this.renderArticles();
          }

          handleCategoryClick(link) {
              // Update active state
              document.querySelectorAll('.category-link').forEach(l => l.classList.remove('active'));
              link.classList.add('active');

              // Update filter
              const category = link.dataset.category;
              this.currentFilters.category = category;
              document.getElementById('categoryFilter').value = category;
              this.applyFilters();
          }

          handleTagClick(tagText) {
              const searchInput = document.getElementById('searchInput');
              searchInput.value = tagText;
              this.handleSearch(tagText);
          }

          applyFilters() {
              this.filteredArticles = this.articles.filter(article => {
                  // Search filter
                  if (this.currentSearch) {
                      const searchMatch =
                          article.title.toLowerCase().includes(this.currentSearch) ||
                          article.excerpt.toLowerCase().includes(this.currentSearch) ||
                          article.tags.some(tag => tag.toLowerCase().includes(this.currentSearch)) ||
                          article.author.toLowerCase().includes(this.currentSearch);

                      if (!searchMatch) return false;
                  }

                  // Category filter
                  if (this.currentFilters.category && article.category !== this.currentFilters.category) {
                      return false;
                  }

                  // Difficulty filter
                  if (this.currentFilters.difficulty && article.difficulty !== this.currentFilters.difficulty) {
                      return false;
                  }

                  // Date filter
                  if (this.currentFilters.date) {
                      const articleDate = new Date(article.date);
                      const now = new Date();
                      let cutoffDate;

                      switch (this.currentFilters.date) {
                          case 'week':
                              cutoffDate = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);
                              break;
                          case 'month':
                              cutoffDate = new Date(now.getTime() - 30 * 24 * 60 * 60 * 1000);
                              break;
                          case 'quarter':
                              cutoffDate = new Date(now.getTime() - 90 * 24 * 60 * 60 * 1000);
                              break;
                          case 'year':
                              cutoffDate = new Date(now.getTime() - 365 * 24 * 60 * 60 * 1000);
                              break;
                          default:
                              cutoffDate = null;
                      }

                      if (cutoffDate && articleDate < cutoffDate) {
                          return false;
                      }
                  }

                  return true;
              });

              this.renderArticles();
              this.updateResultsCount();
          }

          // renderArticles() {
          //     const grid = document.getElementById('articlesGrid');
          //     const noResults = document.getElementById('noResults');

          //     if (this.filteredArticles.length === 0) {
          //         grid.style.display = 'none';
          //         noResults.style.display = 'block';
          //         return;
          //     }

          //     grid.style.display = 'grid';
          //     noResults.style.display = 'none';

          //     grid.innerHTML = this.filteredArticles.map(article => `
          //         <article class="article-card fade-in" data-id="${article.id}">
          //             <div class="article-header">
          //                 <span class="article-category">${this.formatCategory(article.category)}</span>
          //             </div>
          //             <h3 class="article-title">${article.title}</h3>
          //             <p class="article-excerpt">${article.excerpt}</p>
          //             <div class="article-tags">
          //                 ${article.tags.slice(0, 3).map(tag =>
          //                     `<span class="article-tag">${tag}</span>`
          //                 ).join('')}
          //             </div>
          //             <div class="article-meta">
          //                 <div>
          //                     <strong>${article.author}</strong> ‚Ä¢ ${this.formatDate(article.date)}
          //                 </div>
          //                 <div>
          //                     ${article.readTime} ‚Ä¢ ${article.views.toLocaleString()} views
          //                 </div>
          //             </div>
          //             <div class="article-actions">
          //                 <button class="action-btn upvote-btn ${article.userUpvoted ? 'upvoted' : ''}"
          //                         data-id="${article.id}" title="Mark as helpful">
          //                     <span>üëç</span>
          //                     <span>${article.upvotes || 0}</span>
          //                 </button>
          //                 <button class="action-btn helpful-btn" data-id="${article.id}" title="This helped me">
          //                     <span>‚úÖ</span>
          //                     <span>Helped ${article.helpfulCount || 0}</span>
          //                 </button>
          //                 <button class="action-btn suggest-edit" data-id="${article.id}" title="Suggest edit">
          //                     <span>‚úèÔ∏è</span>
          //                     <span>Suggest Edit</span>
          //                 </button>
          //             </div>
          //         </article>
          //     `).join('');

          //     // Add click handlers for article cards and actions
          //     grid.querySelectorAll('.article-card').forEach(card => {
          //         // Article title click - open article
          //         card.querySelector('.article-title').addEventListener('click', (e) => {
          //             e.stopPropagation();
          //             this.openArticle(card.dataset.id);
          //         });

          //         // Upvote button
          //         card.querySelector('.upvote-btn').addEventListener('click', (e) => {
          //             e.stopPropagation();
          //             this.handleUpvote(card.dataset.id);
          //         });

          //         // Helpful button
          //         card.querySelector('.helpful-btn').addEventListener('click', (e) => {
          //             e.stopPropagation();
          //             this.handleHelpful(card.dataset.id);
          //         });

          //         // Suggest edit button
          //         card.querySelector('.suggest-edit').addEventListener('click', (e) => {
          //             e.stopPropagation();
          //             this.showEditModal(card.dataset.id);
          //         });
          //     });
          // }


renderArticles() {
    const grid = document.getElementById('articlesGrid');
    const noResults = document.getElementById('noResults');

    if (this.filteredArticles.length === 0) {
        grid.style.display = 'none';
        noResults.style.display = 'block';
        return;
    }

    grid.style.display = 'grid';
    noResults.style.display = 'none';

    // Build HTML
    grid.innerHTML = this.filteredArticles.map(article => `
        <article class="article-card fade-in" data-id="${article.id}">
            <div class="article-header">
                <span class="article-category">${this.formatCategory(article.category)}</span>
            </div>
            <h3 class="article-title">${article.title}</h3>
            <p class="article-excerpt">${article.excerpt}</p>
            <div class="article-tags">
                ${article.tags.slice(0, 3).map(tag =>
                    `<span class="article-tag">${tag}</span>`
                ).join('')}
            </div>
            <div class="article-meta">
                <div>
                    <strong>${article.author}</strong> ‚Ä¢ ${this.formatDate(article.date)}
                </div>
                <div>
                    ${article.readTime} ‚Ä¢ ${article.views.toLocaleString()} views
                </div>
            </div>
            <div class="article-actions">
                <button class="action-btn upvote-btn ${article.userUpvoted ? 'upvoted' : ''}"
                        data-id="${article.id}" title="Mark as helpful">
                    <span>üëç</span>
                    <span>${article.upvotes || 0}</span>
                </button>
                <button class="action-btn helpful-btn" data-id="${article.id}" title="This helped me">
                    <span>‚úÖ</span>
                    <span>Helped ${article.helpfulCount || 0}</span>
                </button>
                <button class="action-btn suggest-edit" data-id="${article.id}" title="Suggest edit">
                    <span>‚úèÔ∏è</span>
                    <span>Suggest Edit</span>
                </button>
            </div>
        </article>
    `).join('');

    // Event delegation for card clicks
    grid.onclick = (e) => {
        const card = e.target.closest('.article-card');
        if (!card) return;

        // If click was on a button, do nothing
        if (e.target.closest('.upvote-btn') || e.target.closest('.helpful-btn') || e.target.closest('.suggest-edit')) {
            return;
        }

        const articleId = card.dataset.id;
        console.log('Card clicked!', articleId);
        this.openArticle(articleId);
    };

    // Buttons still need their own listeners
    grid.querySelectorAll('.upvote-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            this.handleUpvote(btn.dataset.id);
        });
    });

    grid.querySelectorAll('.helpful-btn').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            this.handleHelpful(btn.dataset.id);
        });
    });

    grid.querySelectorAll('.suggest-edit').forEach(btn => {
        btn.addEventListener('click', (e) => {
            e.stopPropagation();
            this.showEditModal(btn.dataset.id);
        });
    });
}



          async handleUpvote(articleId) {
              try {
                  const article = this.articles.find(a => a.id == articleId);
                  if (!article) return;

                  // Toggle upvote state
                  const isUpvoted = article.userUpvoted || false;
                  const newUpvoteState = !isUpvoted;

                  // Update local state immediately for responsiveness
                  article.userUpvoted = newUpvoteState;
                  article.upvotes = (article.upvotes || 0) + (newUpvoteState ? 1 : -1);

                  // Update UI
                  const btn = document.querySelector(`.upvote-btn[data-id="${articleId}"]`);
                  if (btn) {
                      btn.classList.toggle('upvoted', newUpvoteState);
                      btn.querySelector('span:last-child').textContent = article.upvotes;
                  }

                  // Send to backend
                  await fetch(`https://worktoolshubv2.onrender.com/api/knowledge-base/articles/${articleId}/upvote`, {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify({ upvote: newUpvoteState })
                  });

                  // Update sort if needed
                  this.applyFilters();
              } catch (error) {
                  console.error('Upvote error:', error);
              }
          }

          async handleHelpful(articleId) {
              try {
                  const article = this.articles.find(a => a.id == articleId);
                  if (!article) return;

                  // Increment helpful count
                  article.helpfulCount = (article.helpfulCount || 0) + 1;

                  // Update UI immediately
                  const btn = document.querySelector(`.helpful-btn[data-id="${articleId}"]`);
                  if (btn) {
                      btn.querySelector('span:last-child').textContent = `Helped ${article.helpfulCount}`;

                      // Visual feedback
                      btn.style.background = 'var(--kb-accent)';
                      btn.style.color = 'white';
                      setTimeout(() => {
                          btn.style.background = '';
                          btn.style.color = '';
                      }, 1000);
                  }

                  // Send to backend
                  await fetch(`https://worktoolshubv2.onrender.com/api/knowledge-base/articles/${articleId}/helpful`, {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' }
                  });

              } catch (error) {
                  console.error('Helpful error:', error);
              }
          }

          showEditModal(articleId) {
              const article = this.articles.find(a => a.id == articleId);
              if (!article) return;

              // Populate modal
              document.getElementById('editArticleId').value = articleId;
              document.getElementById('editTitle').value = article.title;

              // Show modal
              document.getElementById('editModal').classList.add('active');
          }

          hideEditModal() {
              document.getElementById('editModal').classList.remove('active');
              document.getElementById('editForm').reset();
          }

          async submitEditSuggestion(formData) {
              try {
                  const response = await fetch('https://worktoolshubv2.onrender.com/api/knowledge-base/edit-suggestions', {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify(formData)
                  });

                  if (response.ok) {
                      alert('Thank you! Your edit suggestion has been submitted for review.');
                      this.hideEditModal();
                  } else {
                      throw new Error('Failed to submit suggestion');
                  }
              } catch (error) {
                  console.error('Edit suggestion error:', error);
                  alert('Sorry, there was an error submitting your suggestion. Please try again.');
              }
          }

          showAIAssistant() {
              const panel = document.getElementById('aiPanel');
              panel.classList.add('active');
              document.getElementById('aiInput').focus();
          }

          hideAIAssistant() {
              document.getElementById('aiPanel').classList.remove('active');
          }

          async handleAIQuery(query) {
              const submitBtn = document.getElementById('aiSubmit');
              const responseDiv = document.getElementById('aiResponse');
              const responseContent = document.getElementById('aiResponseContent');

              // Show loading state
              submitBtn.disabled = true;
              submitBtn.querySelector('.ai-submit-text').style.display = 'none';
              submitBtn.querySelector('.ai-submit-loading').style.display = 'flex';

              try {
                  const response = await fetch('https://worktoolshubv2.onrender.com/api/knowledge-base/ai-query', {
                      method: 'POST',
                      headers: { 'Content-Type': 'application/json' },
                      body: JSON.stringify({
                          query: query,
                          context: this.articles.map(a => ({ title: a.title, excerpt: a.excerpt, tags: a.tags }))
                      })
                  });

                  if (!response.ok) {
                      throw new Error('AI service unavailable');
                  }

                  const result = await response.json();
                  responseContent.textContent = result.answer;
                  responseDiv.classList.add('active');

                  // If AI suggests existing articles, highlight them
                  if (result.relatedArticles && result.relatedArticles.length > 0) {
                      responseContent.textContent += '\n\nRelated articles:\n' +
                          result.relatedArticles.map(a => `‚Ä¢ ${a.title}`).join('\n');
                  }

              } catch (error) {
                  console.error('AI query error:', error);
                  responseContent.textContent = 'Sorry, the AI assistant is currently unavailable. Please try searching our existing articles or contact support.';
                  responseDiv.classList.add('active');
              } finally {
                  // Reset button state
                  submitBtn.disabled = false;
                  submitBtn.querySelector('.ai-submit-text').style.display = 'inline';
                  submitBtn.querySelector('.ai-submit-loading').style.display = 'none';
              }}
          showLoading() {
              const grid = document.getElementById('articlesGrid');
              grid.innerHTML = Array(6).fill(0).map(() => `
                  <div class="skeleton-card loading-skeleton">
                      <div class="skeleton-line short"></div>
                      <div class="skeleton-line"></div>
                      <div class="skeleton-line medium"></div>
                      <div class="skeleton-line short"></div>
                  </div>
              `).join('');
          }

          updateResultsCount() {
              const count = this.filteredArticles.length;
              const resultsCount = document.getElementById('resultsCount');
              resultsCount.textContent = `Showing ${count} article${count !== 1 ? 's' : ''}`;
          }

          formatCategory(category) {
              const categoryMap = {
                  'technical': 'Technical Guides',
                  'tutorials': 'Tutorials',
                  'troubleshooting': 'Troubleshooting',
                  'best-practices': 'Best Practices',
                  'tools': 'Tools & Resources'
              };
              return categoryMap[category] || category;
          }

          formatDate(dateString) {
              const date = new Date(dateString);
              const now = new Date();
              const diffTime = Math.abs(now - date);
              const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));

              if (diffDays === 1) return 'Yesterday';
              if (diffDays < 7) return `${diffDays} days ago`;
              if (diffDays < 30) return `${Math.ceil(diffDays / 7)} weeks ago`;
              if (diffDays < 365) return `${Math.ceil(diffDays / 30)} months ago`;

              return date.toLocaleDateString('en-US', {
                  year: 'numeric',
                  month: 'short',
                  day: 'numeric'
              });
          }

          async openArticle(articleId) {
              // This would typically navigate to the full article page
              // For now, we'll show an alert as a placeholder
              const article = this.articles.find(a => a.id == articleId);
              if (article) {
                  // In a real implementation, this would route to /knowledge-base/article/{id}
                  window.location.href = `article.html?id=${articleId}`;
                  console.log('clickedd!!!!');

                  // Increment view count (would be done server-side in real implementation)
                  article.views++;
                  this.renderArticles();
              }
          }

          debounce(func, wait) {
              let timeout;
              return function executedFunction(...args) {
                  const later = () => {
                      clearTimeout(timeout);
                      func(...args);
                  };
                  clearTimeout(timeout);
                  timeout = setTimeout(later, wait);
              };
          }
      }

      // Initialize Knowledge Base when DOM is loaded
      document.addEventListener('DOMContentLoaded', () => {
          window.kbSystem = new KnowledgeBase();
          // AI NO RESULT
          document.getElementById("noResultsAiBtn").addEventListener("click", () => {
  // Make sure the panel is visible
  window.kbSystem.showAIAssistant();

  // Use your default query
  const query = "I didn‚Äôt find any articles, please help me with this search.";
  document.getElementById("aiInput").value = query;

  // Send to AI
  window.kbSystem.handleAIQuery(query);
});
          // AI Assistant toggle
          document.getElementById('aiToggle').addEventListener('click', () => {
              const panel = document.getElementById('aiPanel');
              if (panel.classList.contains('active')) {
                  window.kbSystem.hideAIAssistant();
              } else {
                  window.kbSystem.showAIAssistant();
              }
          });

          // AI form submission
          document.getElementById('aiSubmit').addEventListener('click', () => {
              const query = document.getElementById('aiInput').value.trim();
              if (query) {
                  window.kbSystem.handleAIQuery(query);
              }
          });

          // AI input enter key
          document.getElementById('aiInput').addEventListener('keypress', (e) => {
              if (e.key === 'Enter' && e.ctrlKey) {
                  const query = e.target.value.trim();
                  if (query) {
                      window.kbSystem.handleAIQuery(query);
                  }
              }
          });

          // Edit modal handlers
          document.getElementById('modalClose').addEventListener('click', () => {
              window.kbSystem.hideEditModal();
          });

          document.getElementById('cancelEdit').addEventListener('click', () => {
              window.kbSystem.hideEditModal();
          });

          document.getElementById('editForm').addEventListener('submit', (e) => {
              e.preventDefault();

              const formData = {
                  articleId: document.getElementById('editArticleId').value,
                  editorName: document.getElementById('editorName').value,
                  editType: document.getElementById('editType').value,
                  suggestion: document.getElementById('editSuggestion').value,
                  timestamp: new Date().toISOString()
              };

              window.kbSystem.submitEditSuggestion(formData);
          });

          // Close modal when clicking overlay
          document.getElementById('editModal').addEventListener('click', (e) => {
              if (e.target.id === 'editModal') {
                  window.kbSystem.hideEditModal();
              }
          });

          // Close AI panel when clicking outside
          document.addEventListener('click', (e) => {
              const aiAssistant = document.querySelector('.ai-assistant');
              const aiPanel = document.getElementById('aiPanel');

              if (aiPanel.classList.contains('active') &&
                  !aiAssistant.contains(e.target)) {
                  window.kbSystem.hideAIAssistant();
              }
          });
      });

      // Add some smooth scroll behavior for better UX
      document.documentElement.style.scrollBehavior = 'smooth';
    </script>
  </body>
</html>
