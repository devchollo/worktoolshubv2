<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Generate stunning logos and images using AI. Free, fast, and powerful image generation with Gemini AI." />
  <meta name="keywords" content="AI image generator, logo generator, AI art, Gemini AI, image creation, logo design" />
  <meta property="og:title" content="AI Image Generator - Create Logos & Art | WorkToolsHub" />
  <meta property="og:description" content="Generate stunning logos and images using AI. Free, fast, and powerful." />
  <meta property="og:type" content="website" />
  <link rel="icon" type="image/x-icon" href="https://www.worktoolshub.info/assets/icon-192.png" />
  <title>AI Image Generator - Create Logos & Art | WorkToolsHub</title>
  <link rel="stylesheet" href="../styles/main.css" />
  <link rel="stylesheet" href="../styles/tools.css" />
  
  <style>
    :root {
      --gradient-1: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --gradient-2: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      --gradient-3: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --shadow-glow: 0 8px 32px rgba(102, 126, 234, 0.3);
    }

    .image-gen-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .tool-header {
      text-align: center;
      margin-bottom: 3rem;
      animation: fadeInUp 0.6s ease;
    }

    .tool-header h1 {
      background: var(--gradient-1);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1.5fr;
      gap: 2rem;
      margin-bottom: 2rem;
    }

    .control-panel {
      background: var(--bg-color);
      border: 2px solid var(--border-color);
      border-radius: 20px;
      padding: 2rem;
      height: fit-content;
      position: sticky;
      top: 100px;
      box-shadow: var(--shadow-lg);
    }

    .section-title {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .prompt-container {
      margin-bottom: 2rem;
    }

    .prompt-textarea {
      width: 100%;
      min-height: 120px;
      padding: 1rem;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      font-size: 1rem;
      font-family: inherit;
      resize: vertical;
      transition: all 0.3s ease;
      background: var(--surface-color);
    }

    .prompt-textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 4px rgba(102, 126, 234, 0.1);
    }

    .prompt-suggestions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-top: 1rem;
    }

    .suggestion-chip {
      background: var(--surface-color);
      border: 1px solid var(--border-color);
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.875rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .suggestion-chip:hover {
      background: #667eea;
      color: white;
      border-color: #667eea;
      transform: translateY(-2px);
    }

    .style-selector {
      margin-bottom: 2rem;
    }

    .style-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .style-option {
      position: relative;
      border: 2px solid var(--border-color);
      border-radius: 12px;
      padding: 1rem;
      cursor: pointer;
      transition: all 0.3s ease;
      background: var(--surface-color);
    }

    .style-option:hover {
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: var(--shadow-glow);
    }

    .style-option.selected {
      border-color: #667eea;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
    }

    .style-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .style-name {
      font-weight: 600;
      color: var(--text-primary);
    }

    .advanced-options {
      border-top: 1px solid var(--border-color);
      padding-top: 1.5rem;
      margin-top: 1.5rem;
    }

    .option-group {
      margin-bottom: 1.5rem;
    }

    .option-label {
      display: block;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--text-primary);
      font-size: 0.875rem;
    }

    .size-selector {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 0.5rem;
    }

    .size-option {
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s ease;
      background: var(--surface-color);
      font-size: 0.875rem;
    }

    .size-option:hover {
      border-color: #667eea;
    }

    .size-option.selected {
      border-color: #667eea;
      background: #667eea;
      color: white;
    }

    .number-input {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border-color);
      border-radius: 8px;
      font-size: 1rem;
    }

    .generate-btn {
      width: 100%;
      background: var(--gradient-1);
      color: white;
      border: none;
      padding: 1.25rem 2rem;
      border-radius: 12px;
      font-size: 1.125rem;
      font-weight: 700;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 2rem;
      position: relative;
      overflow: hidden;
    }

    .generate-btn:hover:not(:disabled) {
      transform: translateY(-2px);
      box-shadow: var(--shadow-glow);
    }

    .generate-btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
    }

    .generate-btn .btn-text {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .generate-btn .loading-spinner {
      display: none;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .generate-btn.loading .btn-text {
      display: none;
    }

    .generate-btn.loading .loading-spinner {
      display: flex;
    }

    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    .results-section {
      background: var(--bg-color);
      border: 2px solid var(--border-color);
      border-radius: 20px;
      padding: 2rem;
      min-height: 600px;
      box-shadow: var(--shadow-lg);
    }

    .empty-state {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100%;
      min-height: 500px;
      text-align: center;
      color: var(--text-secondary);
    }

    .empty-icon {
      font-size: 5rem;
      margin-bottom: 1rem;
      opacity: 0.5;
    }

    .generated-images {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 1.5rem;
    }

    .image-card {
      background: var(--surface-color);
      border: 2px solid var(--border-color);
      border-radius: 16px;
      overflow: hidden;
      transition: all 0.3s ease;
      animation: fadeInUp 0.5s ease;
    }

    .image-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-glow);
    }

    .image-wrapper {
      position: relative;
      width: 100%;
      padding-top: 100%;
      background: var(--surface-color);
      overflow: hidden;
    }

    .generated-image {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .image-loading {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .image-actions {
      padding: 1rem;
      display: flex;
      gap: 0.5rem;
    }

    .action-btn {
      flex: 1;
      padding: 0.75rem;
      border: none;
      border-radius: 8px;
      font-size: 0.875rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .download-btn {
      background: #10b981;
      color: white;
    }

    .download-btn:hover {
      background: #059669;
      transform: translateY(-1px);
    }


    .status-message {
      padding: 1rem 1.5rem;
      border-radius: 12px;
      margin-bottom: 1.5rem;
      font-weight: 600;
      display: none;
      animation: slideIn 0.3s ease;
    }

    .status-message.success {
      background: #d1fae5;
      border: 2px solid #a7f3d0;
      color: #065f46;
      display: block;
    }

    .status-message.error {
      background: #fee2e2;
      border: 2px solid #fecaca;
      color: #dc2626;
      display: block;
    }

    .status-message.info {
      background: #dbeafe;
      border: 2px solid #bfdbfe;
      color: #1e40af;
      display: block;
    }

    .history-section {
      margin-top: 3rem;
      padding: 2rem;
      background: var(--surface-color);
      border-radius: 20px;
      border: 2px solid var(--border-color);
    }

    .history-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin-top: 1.5rem;
    }

    .history-item {
      position: relative;
      aspect-ratio: 1;
      border-radius: 12px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .history-item:hover {
      transform: scale(1.05);
      box-shadow: var(--shadow-lg);
    }

    .history-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @media (max-width: 1024px) {
      .main-grid {
        grid-template-columns: 1fr;
      }

      .control-panel {
        position: relative;
        top: 0;
      }

      .tool-header h1 {
        font-size: 2rem;
      }
    }

    @media (max-width: 768px) {
      .style-grid {
        grid-template-columns: 1fr;
      }

      .size-selector {
        grid-template-columns: 1fr;
      }

      .generated-images {
        grid-template-columns: 1fr;
      }
    }
  </style>
</head>
<body>
  <div id="header"></div>
  <div id="bread"></div>

  <main>
    <section class="image-gen-container">
      <div id="user-info" style="margin-bottom: 1rem;"></div>
      
      <div class="tool-header">
        <h1>🎨 AI Image Generator</h1>
        <p class="subtitle">
          Create stunning logos, artwork, and designs with the power of AI
        </p>
      </div>

      <div class="main-grid">
        <!-- Control Panel -->
        <div class="control-panel">
          <h3 class="section-title">
            <span>✨</span> Describe Your Vision
          </h3>

          <div class="prompt-container">
            <textarea 
              id="promptInput"
              class="prompt-textarea"
              placeholder="Describe the image you want to create... (e.g., 'A modern minimalist logo for a tech startup, blue and white colors, clean lines')"
              maxlength="2000"
            ></textarea>
            
            <div class="prompt-suggestions">
              <span class="suggestion-chip" data-prompt="Modern minimalist logo for a tech startup, blue gradient">Tech Logo</span>
              <span class="suggestion-chip" data-prompt="Elegant restaurant logo with fork and knife, gold and black colors">Restaurant Logo</span>
              <span class="suggestion-chip" data-prompt="Abstract geometric pattern, vibrant colors, modern art style">Abstract Art</span>
              <span class="suggestion-chip" data-prompt="Professional business card design, clean and minimal">Business Card</span>
            </div>
          </div>

          <div class="style-selector">
            <h3 class="section-title">
              <span>🎭</span> Choose Style
            </h3>
            <div class="style-grid">
              <div class="style-option selected" data-style="photorealistic">
                <div class="style-icon">📸</div>
                <div class="style-name">Photorealistic</div>
              </div>
              <div class="style-option" data-style="artistic">
                <div class="style-icon">🎨</div>
                <div class="style-name">Artistic</div>
              </div>
              <div class="style-option" data-style="minimalist">
                <div class="style-icon">⬜</div>
                <div class="style-name">Minimalist</div>
              </div>
              <div class="style-option" data-style="abstract">
                <div class="style-icon">🌀</div>
                <div class="style-name">Abstract</div>
              </div>
            </div>
          </div>

          <div class="advanced-options">
            <h3 class="section-title">
              <span>⚙️</span> Advanced Options
            </h3>

            <div class="option-group">
              <label class="option-label">Image Size</label>
              <div class="size-selector">
                <div class="size-option selected" data-size="1024x1024">Square<br/>1024×1024</div>
                <div class="size-option" data-size="1024x1792">Portrait<br/>1024×1792</div>
                <div class="size-option" data-size="1792x1024">Landscape<br/>1792×1024</div>
              </div>
            </div>

            <div class="option-group">
              <label class="option-label">Number of Images (1-4)</label>
              <input type="number" id="numImages" class="number-input" min="1" max="4" value="1" />
            </div>
          </div>

          <button class="generate-btn" id="generateBtn">
            <span class="btn-text">
              <span>✨</span>
              <span>Generate Images</span>
            </span>
            <span class="loading-spinner">
              <div class="spinner"></div>
              <span>Creating magic...</span>
            </span>
          </button>
        </div>

        <!-- Results Section -->
        <div class="results-section">
          <div id="statusMessage" class="status-message"></div>

          <div id="emptyState" class="empty-state">
            <div class="empty-icon">🎨</div>
            <h3>Ready to Create</h3>
            <p>Describe your vision and watch AI bring it to life</p>
          </div>

          <div id="generatedImages" class="generated-images" style="display: none;"></div>
        </div>
      </div>

      <!-- History Section -->
      <div class="history-section" id="historySection" style="display: none;">
        <h3 class="section-title">
          <span>📂</span> Recent Generations
        </h3>
        <div class="history-grid" id="historyGrid"></div>
      </div>
    </section>
  </main>

  <div id="footer"></div>

  <script src="../scripts/layout.js"></script>
  <script type="module" src="../scripts/main.js" defer></script>
  <script src="../scripts/footer.js"></script>

  <script>
    document.addEventListener('DOMContentLoaded', async () => {
        class AIImageGenerator {
          constructor() {
            this.promptInput = document.getElementById('promptInput');
            this.generateBtn = document.getElementById('generateBtn');
            this.statusMessage = document.getElementById('statusMessage');
            this.emptyState = document.getElementById('emptyState');
            this.generatedImages = document.getElementById('generatedImages');
            this.historySection = document.getElementById('historySection');
            this.historyGrid = document.getElementById('historyGrid');
            this.numImagesInput = document.getElementById('numImages');

            this.selectedStyle = 'photorealistic';
            this.selectedSize = '1024x1024';
            this.currentPrompt = ''; // Store current prompt for upscaling
            this.history = this.loadHistory();

            this.init();
          }

          init() {
            this.bindEvents();
            this.renderHistory();
          }

          bindEvents() {
            // Generate button
            this.generateBtn.addEventListener('click', () => this.generateImages());

            // Prompt suggestions
            document.querySelectorAll('.suggestion-chip').forEach(chip => {
              chip.addEventListener('click', (e) => {
                this.promptInput.value = e.target.dataset.prompt;
                this.promptInput.focus();
              });
            });

            // Style selection
            document.querySelectorAll('.style-option').forEach(option => {
              option.addEventListener('click', (e) => {
                document.querySelectorAll('.style-option').forEach(o => o.classList.remove('selected'));
                e.currentTarget.classList.add('selected');
                this.selectedStyle = e.currentTarget.dataset.style;
              });
            });

            // Size selection
            document.querySelectorAll('.size-option').forEach(option => {
              option.addEventListener('click', (e) => {
                document.querySelectorAll('.size-option').forEach(o => o.classList.remove('selected'));
                e.currentTarget.classList.add('selected');
                this.selectedSize = e.currentTarget.dataset.size;
              });
            });

            // Enter key to generate
            this.promptInput.addEventListener('keydown', (e) => {
              if (e.key === 'Enter' && e.ctrlKey) {
                this.generateImages();
              }
            });
          }

          async generateImages() {
            const prompt = this.promptInput.value.trim();
            const numImages = parseInt(this.numImagesInput.value) || 1;

            if (!prompt) {
              this.showStatus('Please describe what you want to create', 'error');
              this.promptInput.focus();
              return;
            }

            if (numImages < 1 || numImages > 4) {
              this.showStatus('Please select 1-4 images', 'error');
              return;
            }

            this.currentPrompt = prompt; // Store for upscaling
            this.generateBtn.disabled = true;
            this.showStatus('Generating your images... This may take 10-30 seconds', 'info');

            try {
              const response = await fetch('https://worktoolshubv2.onrender.com/api/images/generate', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  prompt: prompt,
                  style: this.selectedStyle,
                  size: this.selectedSize,
                  numImages: numImages
                }),
              });

              if (!response.ok) {
                const errorData = await response.json();
                throw new Error(errorData.message || `Generation failed: ${response.status}`);
              }

              const result = await response.json();
              
              this.displayImages(result.images, prompt);
              this.saveToHistory(prompt);
              this.showStatus(`Successfully generated ${result.images.length} image(s)!`, 'success');

            } catch (error) {
              console.error('Generation error:', error);
              this.showStatus(`Failed to generate images: ${error.message}`, 'error');
            } finally {
              this.generateBtn.disabled = false;
            }
          }

          displayImages(images, prompt) {
            this.emptyState.style.display = 'none';
            this.generatedImages.style.display = 'grid';
            this.generatedImages.innerHTML = '';

            images.forEach((imageData, index) => {
              const card = document.createElement('div');
              card.className = 'image-card';
              
              card.innerHTML = `
                <div class="image-wrapper">
                  <img 
                    src="${this.escapeHtml(imageData.url)}" 
                    alt="${this.escapeHtml(prompt)}"
                    class="generated-image"
                    loading="lazy"
                  />
                </div>
                <div class="image-actions">
                  <button class="action-btn download-btn" data-url="${this.escapeHtml(imageData.url)}" data-prompt="${this.escapeHtml(prompt)}">
                    💾 Download
                  </button>
                </div>
              `;

              // Download button
              card.querySelector('.download-btn').addEventListener('click', (e) => {
                this.downloadImage(e.currentTarget.dataset.url, e.currentTarget.dataset.prompt);
              });

              this.generatedImages.appendChild(card);
            });
          }

          async downloadImage(url, prompt) {
            try {
              const response = await fetch(url);
              const blob = await response.blob();
              const downloadUrl = URL.createObjectURL(blob);
              
              const a = document.createElement('a');
              a.href = downloadUrl;
              a.download = `ai-generated-${Date.now()}.png`;
              document.body.appendChild(a);
              a.click();
              document.body.removeChild(a);
              URL.revokeObjectURL(downloadUrl);

              this.showStatus('Image downloaded successfully!', 'success');
            } catch (error) {
              console.error('Download error:', error);
              this.showStatus('Failed to download image', 'error');
            }
          }

        
          saveToHistory(prompt) {
            // Only store prompts, not images (to save space)
            const historyItem = {
              prompt: prompt,
              style: this.selectedStyle,
              size: this.selectedSize,
              timestamp: Date.now()
            };

            this.history.unshift(historyItem);
            
            // Keep only last 10 items
            if (this.history.length > 10) {
              this.history = this.history.slice(0, 10);
            }

            try {
              localStorage.setItem('ai_image_history', JSON.stringify(this.history));
            } catch (e) {
              console.warn('History storage full, clearing old items');
              localStorage.removeItem('ai_image_history');
              this.history = [historyItem];
              try {
                localStorage.setItem('ai_image_history', JSON.stringify(this.history));
              } catch (e2) {
                console.error('Could not save history');
              }
            }
          }

          loadHistory() {
            try {
              const saved = localStorage.getItem('ai_image_history');
              return saved ? JSON.parse(saved) : [];
            } catch (error) {
              console.error('Failed to load history:', error);
              return [];
            }
          }

          renderHistory() {
            if (this.history.length === 0) {
              this.historySection.style.display = 'none';
              return;
            }

            this.historySection.style.display = 'block';
            this.historyGrid.innerHTML = '';

            this.history.slice(0, 12).forEach((item) => {
              const historyItem = document.createElement('div');
              historyItem.className = 'history-item';
              historyItem.style.cssText = 'cursor:pointer;padding:1rem;background:var(--surface-color);border-radius:8px;border:1px solid var(--border-color);';
              historyItem.innerHTML = `
                <div style="font-size:0.875rem;color:var(--text-primary);margin-bottom:0.5rem;">
                  ${this.escapeHtml(item.prompt.substring(0, 50))}${item.prompt.length > 50 ? '...' : ''}
                </div>
                <div style="font-size:0.75rem;color:var(--text-secondary);">
                  ${item.style} • ${item.size}
                </div>
              `;

              historyItem.addEventListener('click', () => {
                this.promptInput.value = item.prompt;
                this.selectedStyle = item.style;
                this.selectedSize = item.size;
                
                // Update UI selections
                document.querySelectorAll('.style-option').forEach(o => {
                  o.classList.toggle('selected', o.dataset.style === item.style);
                });
                document.querySelectorAll('.size-option').forEach(o => {
                  o.classList.toggle('selected', o.dataset.size === item.size);
                });
                
                window.scrollTo({ top: 0, behavior: 'smooth' });
              });

              this.historyGrid.appendChild(historyItem);
            });
          }

          showStatus(message, type) {
            this.statusMessage.textContent = message;
            this.statusMessage.className = `status-message ${type}`;

            if (type === 'success' || type === 'info') {
              setTimeout(() => {
                this.statusMessage.classList.remove('success', 'info');
              }, 5000);
            }
          }

          escapeHtml(unsafe) {
            return unsafe
              .replace(/&/g, "&amp;")
              .replace(/</g, "&lt;")
              .replace(/>/g, "&gt;")
              .replace(/"/g, "&quot;")
              .replace(/'/g, "&#039;");
          }
        }

        window.aiImageGenerator = new AIImageGenerator();
    });
  </script>
</body>
</html>